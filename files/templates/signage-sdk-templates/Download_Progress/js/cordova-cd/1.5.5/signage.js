cordova.define("cordova/plugin/signage",function(n,F,c){var G;function l(H){}if(window.PalmSystem){l("Window.PalmSystem Available");G=n("cordova/plugin/webos/service")}else{l("Window.PalmSystem is NOT Available");G={Request:function(H,I){l(H+" invoked. But I am a dummy because PalmSystem is not available");if(typeof I.onFailure==="function"){I.onFailure({returnValue:false,errorCode:"CORDOVA_ERR",errorText:"PalmSystem Not Available. Cordova is not installed?"})}}}}var f=null;var g={};function d(H){if(f===null){G.Request("luna://com.webos.service.tv.systemproperty",{method:"getSystemInfo",parameters:{keys:["sdkVersion","boardType"]},onSuccess:function(I){l("getPlatformInfo: onSuccess");l("version : "+I.sdkVersion);var J=I.sdkVersion.split(".");if(J.length>=1&&J[0]==="1"){g={webOSVer:1,chipset:I.boardType.split("_")[0]}}else{if(J.length>=1&&J[0]==="2"){g={webOSVer:2,chipset:I.boardType.split("_")[0]}}else{if(J.length>=1&&J[0]==="3"){g={webOSVer:3,chipset:I.boardType.split("_")[0]}}else{g={webOSVer:0,chipset:""}}}}f=g.webOSVer;H(g)},onFailure:function(I){l("getPlatformInfo: onFailure");g={webOSVer:0,chipset:""};H(g)}})}else{H(g)}}var A=function(H){var I=q[H];l(JSON.stringify(I,null,3));if(I&&I.getEvent===true){if(q[H].listenerObj){q[H].listenerObj.cancel();q[H].getEvent=false;q[H].listenerObj=null}}};var s=function(I,H){var J=q[I];if(J&&typeof J.createListener==="function"){J.listenerObj=J.createListener(H);J.getEvent=true}};function e(I){if(I.substring(0,"ext://".length)!=="ext://"){l("Bad prefix: "+I);return false}var H=I.substring("ext://".length);l("body is: "+H);var J=H.split(":");if(J.length===2){return J[0]+J[1]}else{if(J.length===1){return J[0]}else{l("Bad Syntax: "+I);return false}}}function y(H,J){for(var I in H){if(H[I]===J){return true}}return false}var v={FAILOVER_MODE:"failover",FAILOVER_BACKUPVIASTORAGE_MODE:"backupViaStorage",FAILOVER_PRIORITY:"failoverPriority",IR_OPERATION_MODE:"enableIrRemote",LOCALKEY_OPERATION_MODE:"enableLocalKey",OSD_PORTRAIT_MODE:"osdPortraitMode",TILE_MODE:"tileMode",TILE_ID:"tileId",TILE_ROW:"tileRow",TILE_COLUME:"tileCol",TILE_NATURALMODE:"naturalMode",DPM_MODE:"dpmMode",AUTOMATIC_STANDBY_MODE:"autoSB",ISM_METHOD:"ismmethod",SES_MODE:"smartEnergy",DO_15OFF_MODE:"15off",MONITOR_FAN:"monitorFan",MONITOR_SIGNAL:"monitorSignal",MONITOR_LAMP:"monitorLamp",MONITOR_SCREEN:"monitorScreen",MONITOR_AUDIO:"monitorAudio",AUDIO_SOURCE_HDMI1:"audioSourceHdmi1",AUDIO_SOURCE_HDMI2:"audioSourceHdmi2",AUDIO_SOURCE_DP:"audioSourceDp"};var w=function(H){l("Create Listener for monitorTemperature");var I=G.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"systemMonitor/getTemperature",parameters:{subscribe:true},onSuccess:function(J){l("temperature : "+JSON.stringify(J,null,3));if(J.returnValue===true){var K={source:a.MonitoringSource.THERMOMETER,type:a.EventType.CURRENT_TEMPERATURE,data:{temperature:J.temperature}};if(typeof H==="function"){H(K)}}},onFailure:function(J){l("monitor_temperature : FAIL "+JSON.stringify(J,null,3))}});return I};var k=function(H){l("Create Listener for monitorFan");var I=G.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"systemMonitor/getFanEvent",parameters:{subscribe:true},onSuccess:function(J){l("monitor_fan : "+JSON.stringify(J,null,3));if(J.returnValue===true){var K={source:a.MonitoringSource.FAN,type:a.EventType.FAN_STATUS,data:{status:J.fanFault}};if(typeof H==="function"){H(K)}}},onFailure:function(J){l("monitor_fan : FAIL "+JSON.stringify(J,null,3))}});return I};var m=function(H){l("Create Listener for monitorLamp");var I=G.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"systemMonitor/getLampEvent",parameters:{subscribe:true},onSuccess:function(J){l("monitor_lamp : "+JSON.stringify(J,null,3));if(J.returnValue===true){var K={source:a.MonitoringSource.LAMP,type:a.EventType.LAMP_STATUS,data:{status:J.lampFault}};if(typeof H==="function"){H(K)}}},onFailure:function(J){l("monitor_lamp : FAIL "+JSON.stringify(J,null,3))}});return I};var u=function(H){l("Create Listener for monitorSignal");var I=G.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"systemMonitor/getSignalEvent",parameters:{subscribe:true},onSuccess:function(J){l("monitor_signal : "+JSON.stringify(J,null,3));if(J.returnValue===true){var K={type:a.EventType.SIGNAL_STATUS,source:a.MonitoringSource.SIGNAL,data:{}};if(J.noSignal===true){K.data.status="no_signal"}else{K.data.status="signal_available"}if(typeof H==="function"){H(K)}}},onFailure:function(J){l("monitor_signal : FAIL "+JSON.stringify(J,null,3))}});return I};var B=function(H){l("Create Listener for monitorScreen");var I=G.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"systemMonitor/getScreenEvent",parameters:{subscribe:true},onSuccess:function(J){l("monitor_screen : "+JSON.stringify(J,null,3));if(J.returnValue===true){var K={source:a.MonitoringSource.SCREEN,type:a.EventType.SCREEN_STATUS,data:{status:J.screen}};if(typeof H==="function"){H(K)}}},onFailure:function(J){l("monitor_screen FAIL : "+JSON.stringify(J,null,3))}});return I};function E(I,J,H){if(o.hasOwnProperty(I)===false){o[I]={};o[I].instanceOfSubscription=J;o[I].eventListener=H}else{o[I].instanceOfSubscription=J;o[I].eventListener=H}return true}function j(H){if(o.hasOwnProperty(H)===false){return false}else{if(o[H].instanceOfSubscription===null){return false}else{o[H].instanceOfSubscription.cancel();o[H].instanceOfSubscription=null;o[H].eventListener=null;return true}}}function p(H){if(o.hasOwnProperty(H)===false){return false}else{return o[H]}}var h=function(H,J,I){l("Create Listener for monitorRS232C");var K=G.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"systemMonitor/startMonitorRS232C",parameters:{subscribe:true},onSuccess:function(L){l("monitorRS232C success : "+JSON.stringify(L,null,3));if(L.returnValue===true){if(Object.keys(L).length===1){E("RS232C",K,I);H()}else{if(L.hasOwnProperty("data")===true){var M=p("RS232C");if(M===false){J({errorCode:"INTERNAL_ERROR",errorText:"There is not subscriptionEventInfo"})}else{if(typeof M.eventListener==="function"){M.eventListener({data:L.data})}}}else{J({errorCode:"INTERNAL_ERROR",errorText:"Unknown return value"})}}return}},onFailure:function(L){l("monitorRS232C fail : "+JSON.stringify(L,null,3));J({errorCode:"LUNA_ERROR",errorText:"Failed to request getRS232CEvent to system"})}})};var q={fan:{getEvent:false,listenerObj:null,createListener:k},screen:{getEvent:false,listenerObj:null,createListener:B},temperature:{getEvent:false,listenerObj:null,createListener:w},signal:{getEvent:false,listenerObj:null,createListener:u},lamp:{getEvent:false,listenerObj:null,createListener:m}};var o={RS232C:{instanceOfSubscription:null,eventListener:null}};var x={row:0,col:0};var a=function(){};a.UNDEFINED="___undefined___";a.OsdPortraitMode={ON:"90",OFF:"off"};a.ImgResolution={HD:"HD",FHD:"FHD",};a.AutomaticStandbyMode={OFF:"off",STANDBY_4HOURS:"4hours"};a.IsmMethod={NORMAL:"NORMAL",ORBITER:"ORBITER",INVERSION:"INVERSION",COLORWASH:"COLORWASH",WHITEWASH:"WHITEWASH",WASHING_BAR:"WASHINGBAR",USER_IMAGE:"USERIMAGE",USER_VIDEO:"USERVIDEO"};a.FailoverMode={OFF:"off",AUTO:"auto",MANUAL:"manual"};a.DigitalAudioInput={HDMI_DP:"hdmi",AUDIO_IN:"audioIn"};a.DpmMode={OFF:"off",POWER_OFF_5SECOND:"5sec",POWER_OFF_10SECOND:"10sec",POWER_OFF_15SECOND:"15sec",POWER_OFF_1MINUTE:"1min",POWER_OFF_3MINUTE:"3min",POWER_OFF_5MINUTE:"5min",POWER_OFF_10MINUTE:"10min"};a.KeyOperationMode={ALLOW_ALL:"normal",POWER_ONLY:"usePwrOnly",BLOCK_ALL:"blockAll"};a.EventType={CURRENT_TEMPERATURE:"CURRENT_TEMPERATURE",FAN_STATUS:"FAN_STATUS",LAMP_STATUS:"LAMP_STATUS",SCREEN_STATUS:"SCREEN_STATUS",SIGNAL_STATUS:"SIGNAL_STATUS"};a.MonitoringSource={FAN:"FAN",LAMP:"LAMP",SIGNAL:"SIGNAL",SCREEN:"SCREEN",THERMOMETER:"THERMOMETER"};a.KeyCode={ENERGY_SAVING:709,INPUT:712,LG_3D:737,NUM_0:48,NUM_1:49,NUM_2:50,NUM_3:51,NUM_4:52,NUM_5:53,NUM_6:54,NUM_7:55,NUM_8:56,NUM_9:57,OPT_1aA:1103,CLEAR:8,VOL_UP:447,VOL_DOWN:448,MUTE:449,RATIO:722,AUTO:1102,BRIGHTNESS_UP:1100,BRIGHTNESS_DOWN:1101,PSM:1108,SMART_HOME:734,WBAL:1105,MENU:627,SMENU:1106,LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:10,BACK:608,EXIT:601,SIMPLINK:724,TILE:1107,STOP:413,REWIND:412,PLAY:415,PAUSE:19,FAST_FORWARD:417,RED:403,GREEN:404,YELLOW:405,BLUE:406,INFO:1109};function r(I,J,H){if(I.errorCode===undefined||I.errorCode===null){I.errorCode=J}if(I.errorText===undefined||I.errorText===null){I.errorText=H}}function z(K,J,L,H,I){var M={category:K,keys:J};G.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"get",parameters:M,onSuccess:function(N){l("On Success");if(N.returnValue===true){var O=L(N.settings);if(O===false){if(typeof I==="function"){I({errorText:"Invalid DB value",errorCode:"DB_ERROR"})}}else{if(typeof H==="function"){l("successCallback");H(O)}else{l("successCallback not registered or is not a function: "+H)}}}else{l("Settings Failed:  "+JSON.stringify(N,null,3));if(typeof I==="function"){I({errorText:"Invalid DB value : "+N.errorText,errorCode:"DB_ERROR"})}}},onFailure:function(N){l("On Failure");delete N.returnValue;if(N.settings){l("settings = "+JSON.stringify(N.settings,null,3));var P=L(N.settings);l("errorKey = "+JSON.stringify(N.errorKey,null,3));for(var O=0;O<N.errorKey.length;++O){P[N.errorKey[O]]=a.UNDEFINED}l("cbObj = "+JSON.stringify(P,null,3));if(typeof H==="function"){l("successCallback");H(P)}}else{if(typeof I==="function"){I({errorText:((typeof N.errorText==="undefined")?"DB Failure":N.errorText),errorCode:"DB_ERROR"})}}}});l("Requested Service: luna://com.webos.service.commercial.signage.storageservice/settings/");l("params : "+JSON.stringify(M))}function i(M,L,H,I){var N={category:M,settings:L};l("settings : "+JSON.stringify(L,null,3));var J=false;for(var K in L){if(K){l("has key : "+K);J=true;break}}if(J===false){l("Nothing to set");H();return}G.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"set",parameters:N,onSuccess:function(){l("On Success");if(typeof H==="function"){l("SUCCEES CALLBACK");H()}},onFailure:function(O){l("On Failure");delete O.returnValue;if(typeof I==="function"){l("ERROR CALLBACK");I(O)}}});l("Requested Service: luna://com.webos.service.commercial.signage.storageservice/settings/");l("params : "+JSON.stringify(N))}a.prototype.setPortraitMode=function(H,J,M){var N={};var L;function K(O){if(O.portraitMode){for(var P in a.OsdPortraitMode){if(O.portraitMode===a.OsdPortraitMode[P]){return true}}L="Signage.setPortraitMode: Unrecognized OsdPortraintMode : "+O.portraitMode;return false}else{L="Signage.setPortraitMode: portraitMode does not exist.";return false}}if(K(M)){var I=M.portraitMode;N[v.OSD_PORTRAIT_MODE]=I;G.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"setOsdPortraitMode",parameters:{osdPortraitMode:M.portraitMode},onSuccess:function(O){H()},onFailure:function(O){if(O.errorText.indexOf("Unknown method")!==-1){i("commercial",N,H,J)}else{J({errorCode:O.errorCode,errorText:O.errorText})}}});l("setPortraitMode Done")}else{J({errorCode:"BAD_PARAMETER",errorText:L})}};a.prototype.setFailoverMode=function(I,K,Q){var J={};var L;function H(R){l("options:"+JSON.stringify(R,null,3));var U=R.failoverMode;if(U){if(U.mode){if(U.mode===a.FailoverMode.MANUAL){if(U.priority){if(U.priority.length===0||typeof U.priority.length==="undefined"){return false}else{return true}}else{L="priority should be present when mode is MANUAL.";return false}}else{if(U.priority){L="This priority is available only if mode is : Signage.FailoverMode.MANUAL";return false}else{var T=false;l("Mode is: "+U.mode);for(var S in a.FailoverMode){if(U.mode===a.FailoverMode[S]){l("Matched with: "+a.FailoverMode[S]);T=true}}if(!T){l("Unrecognized failoverMode : "+U.mode);L="Unrecognized failoverMode : "+U.mode;return false}else{return true}}}}else{if(!U.priority){return true}else{l("Unrecognized failoverMode : "+U.mode);L="Unrecognized failoverMode : "+U.mode;return false}}}else{L="Fail over mode not set : ";return false}}if(H(Q)){var N=Q.failoverMode;if(!N.mode&&!N.priority){I()}else{if(N.mode===a.FailoverMode.MANUAL){G.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"setManualFailoverPrioirty",parameters:{priority:N.priority},onSuccess:function(R){l("onSuccess");if(R.returnValue){I()}else{l("FAILED: "+R.errorText);K({errorCode:R.errorCode,errorText:R.errorText})}},onFailure:function(R){l("onFailure");l("FAILED: "+R.errorText);K({errorCode:R.errorCode,errorText:R.errorText})}})}else{if(N.mode){var O=N.mode;l("mode: "+N.mode);J[v.FAILOVER_MODE]=O;J[v.FAILOVER_BACKUPVIASTORAGE_MODE]=O;l("Set: "+JSON.stringify(J,null,3));i("commercial",J,I,K);l("setFailoverMode Done")}else{var M={errorCode:"BAD_PARAMETER",errorText:"Mode should be set."};K(M)}}}}else{var P={errorCode:"BAD_PARAMETER",errorText:L};K(P)}};a.prototype.getFailoverMode=function(H,I){try{G.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"getFailoverPrioirty",parameters:{},onSuccess:function(K){l("onSuccess");if(K.returnValue){var O=[];for(var M=0;M<K.priority.length;M++){var N=K.priority[M].split("/");var L="";if(typeof N[3]==="undefined"){O.push("ext://"+N[2].toLowerCase())}else{O.push("ext://"+N[2].toLowerCase()+":1")}}H({priority:O,mode:K.mode})}else{l("FAILED: "+K.errorText);I({errorCode:K.errorCode,errorText:K.errorText})}},onFailure:function(K){l("onFailure");l("FAILED: "+K.errorText);I({errorCode:K.errorCode,errorText:K.errorText})}})}catch(J){l("EXCEPTION"+J);I({errorCode:"SGFO",errorText:"Signage.getFailoverMode occur error during operaation."})}};function C(J,H){var I=typeof J;l("mytype: "+I);l("type: "+H);if(I==="undefined"){return true}else{if(I===H){return J}else{return false}}}a.prototype.setTileInfo=function(H,I,L){var K;var J=function(W,S,X){var O=typeof W.tileInfo.enabled;l("enabledType:"+O);if(O!=="undefined"&&O!=="boolean"){K="enabled should be a boolean";return false}var U=function(Z){var Y=new RegExp(/^[0-9]+$/g).exec(Z);if(Y){return false}else{return true}};if(W.tileInfo){var V=W.tileInfo.row;if(typeof V!=="undefined"){if(U(V)){K="row should be a natural number :"+V;return false}else{if(V>S||V<1){K="row should be 0<n<"+(S+1)+" but :"+V;return false}}}else{return true}var Q=W.tileInfo.column;if(typeof Q!=="undefined"){if(U(Q)){K="column should be a natural number :"+Q;return false}else{if(Q>X||Q<1){K="column should be 0<n<"+(X+1)+" but :"+Q;return false}}}else{return true}if(V===1&&Q===1){K="row and column can't be both 1";return false}var P=W.tileInfo.tileId;if(typeof P!=="undefined"){if(U(P)){K="id should be a natural number :"+P;return false}else{if(P<1){K="id should be bigger than 0 but :"+P;return false}else{var R=x.row;if(V){R=V}var T=x.column;if(Q){T=Q}l("curRow : "+R);l("curCol : "+T);l("id : "+P);if(P>T*R){K="ID should be less than curRow*curCol";return false}}}}else{return true}}else{K="Tile info is mandatory";return false}return true};var M=15;var N=15;G.Request("luna://com.webos.service.config",{method:"getConfigs",parameters:{configNames:["commercial.video.tileRowMax","commercial.video.tileColMax"]},onSuccess:function(P){l("onSuccess");if(P.returnValue){M=P.configs["commercial.video.tileRowMax"];N=P.configs["commercial.video.tileColMax"];if(J(L,M,N)===true){var O=L.tileInfo;var R={};if(typeof O.enabled==="boolean"){if(O.enabled){R[v.TILE_MODE]="on"}else{R[v.TILE_MODE]="off"}}if(O.row){R[v.TILE_ROW]=O.row.toString()}if(O.column){R[v.TILE_COLUME]=O.column.toString()}if(O.tileId){R[v.TILE_ID]=O.tileId.toString()}if(typeof O.naturalMode==="boolean"){if(O.naturalMode){R[v.TILE_NATURALMODE]="on"}else{R[v.TILE_NATURALMODE]="off"}}l("Set: "+JSON.stringify(R,null,3));var Q=function(){l("Do callback");if(O.row){x.row=O.row}if(O.column){x.column=O.column}if(typeof H==="function"){l("Invoke successCallback");H();l("Invoked successCallback")}};i("commercial",R,Q,I);l("setTileInfo Done")}else{var S={errorCode:"BAD_PARAM",errorText:K};I(S)}}else{l("FAILED: "+P.errorText);I({errorCode:P.errorCode,errorText:P.errorText})}},onFailure:function(O){l("onFailure");l("FAILED: "+O.errorText);I({errorCode:O.errorCode,errorText:O.errorText})}})};function t(H){if(H==="on"){return true}else{return false}}a.prototype.getTileInfo=function(H,I){var K=function(L){var M={};l("settings Value: "+JSON.stringify(L,null,3));M.enabled=t(L[v.TILE_MODE]);M.row=parseInt(L[v.TILE_ROW],10);M.column=parseInt(L[v.TILE_COLUME],10);M.tileId=parseInt(L[v.TILE_ID],10);M.naturalMode=t(L[v.TILE_NATURALMODE]);l("Return Value: "+JSON.stringify(M,null,3));return M};var J=[v.TILE_MODE,v.TILE_ROW,v.TILE_COLUME,v.TILE_ID,v.TILE_NATURALMODE];z("commercial",J,K,H,I)};a.prototype.getSignageInfo=function(H,I){G.Request("luna://com.webos.service.commercial.signage.storageservice/",{method:"getSignageInformation",parameters:{},onSuccess:function(K){if(typeof H==="function"){l(K.signageInfo);if(typeof K.signageInfo.digitalAudioInputMode!=="undefined"){var J=a.DigitalAudioInput.HDMI_DP;if(K.signageInfo.digitalAudioInputMode.hasOwnProperty("ext://HDMI:1")){J=K.signageInfo.digitalAudioInputMode["ext://HDMI:1"]}else{if(K.signageInfo.digitalAudioInputMode.hasOwnProperty("ext://hdmi:1")){J=K.signageInfo.digitalAudioInputMode["ext://hdmi:1"]}}K.signageInfo.digitalAudioInputMode=J}H(K.signageInfo)}},onFailure:function(J){delete J.returnValue;if(typeof I==="function"){I(J)}}})};a.prototype.enableCheckScreen=function(H,I,L){var K;var J=function(O){if(typeof O.checkScreen!=="undefined"||O.checkScreen!==null){return true}else{K="need options.checkScreen.";return false}};if(J(L)){var M={checkScreen:(L.checkScreen===true?"on":"off")};l("Set: "+JSON.stringify(M,null,3));i("commercial",M,H,I);l("enableCheckScreen Done")}else{var N={errorCode:"BAD_PARAMETER",errorText:K};I(N)}};a.prototype.setIsmMethod=function(H,I,L){var M={};var K;function J(N,Q,P){if(N.ismMethod){if((Q===false&&N.ismMethod===a.IsmMethod.USER_IMAGE)||(P===false&&(N.ismMethod===a.IsmMethod.USER_IMAGE||N.ismMethod===a.IsmMethod.USER_VIDEO))){K="no supported ismMethod  : "+N.ismMethod;return false}for(var O in a.IsmMethod){if(N.ismMethod===a.IsmMethod[O]){return true}}K="Unrecognized ismMethod  : "+N.ismMethod;return false}else{K="ismMethod  does not exist.";return false}}G.Request("luna://com.webos.service.config/",{method:"getConfigs",parameters:{configNames:["commercial.applist.disablePhoto","commercial.unsupportedFeatures"]},onSuccess:function(V){if(typeof H==="function"&&V.returnValue===true){var T=true;var S=true;var N=V.configs["commercial.applist.disablePhoto"];for(var R=0;R<N.length;R++){if(N[R].toLowerCase()==="com.webos.app.ism"){T=false;break}}var U=V.configs["commercial.unsupportedFeatures"];for(var Q=0;Q<U.length;Q++){if(U[Q].toLowerCase()==="usb"){T=false;S=false;break}}if(J(L,T,S)){if(L.ismMethod){var O=L.ismMethod;l("ismMethod : "+O);M[v.ISM_METHOD]=O}l("Set: "+JSON.stringify(M,null,3));i("commercial",M,H,I);l("setIsmMethod Done")}else{var P={errorCode:"BAD_PARAMETER",errorText:K};I(P)}}},onFailure:function(N){delete N.returnValue;if(typeof I==="function"){I(N)}}})};a.prototype.setDigitalAudioInputMode=function(H,I,L){var K;function J(N){if(N.hasOwnProperty("digitalAudioInputList")){return false}else{if(N.hasOwnProperty("digitalAudioInput")){return true}else{K="digitalAudioInputList  does not exist.";return false}}}if(J(L)){G.Request("luna://com.webos.service.commercial.signage.storageservice/",{method:"setDigitalAudioInputList",parameters:{digitalAudioInputList:{"ext://hdmi:1":L.digitalAudioInput}},onSuccess:function(){if(typeof H==="function"){H()}},onFailure:function(N){delete N.returnValue;if(typeof I==="function"){I(N)}}})}else{var M={errorCode:"BAD_PARAMETER",errorText:K};I(M)}};var D=false;a.prototype.registerSystemMonitor=function(I,M,Q){var P=["fan","signal","lamp","screen","temperature"];var N;var O="BAD_PARAMETER";l("Listeners are: "+JSON.stringify(q,null,3));function H(R){if(D===true){N="Not ready to register monitor now.";O="SYSTEM_ERROR";return false}l("options are: "+JSON.stringify(R,null,3));if(typeof R.eventHandler!=="function"){N="No event handler was given or event hadnler is not a function";return false}if(R.monitorConfiguration){for(var T in R.monitorConfiguration){if(T){var V=false;for(var S=0;S<P.length;++S){if(T===P[S]){l("Found key: "+P[S]);V=true}}if(!V){N="Invalid Monitoring source  : "+T;return false}var U=R.monitorConfiguration[T];l("value: "+U);if(typeof U!=="boolean"){N="Invalid value  : "+U;return false}}}return true}else{N="monitorConfiguration  does not exist.";return false}}if(H(Q)){var K=function(){l("Canceled all previous message subscriptions");var S=Q.eventHandler;for(var R in Q.monitorConfiguration){if(R){var T=Q.monitorConfiguration[R];if(T===true){l("Add listener for : "+R);s(R,S)}}}l("Monitoring Setup : "+JSON.stringify(q,null,3));l("Start Polling : ");G.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"systemMonitor/startMonitor",parameters:{},onSuccess:function(U){l("On Success");if(U.returnValue===true){if(typeof I==="function"){I()}}else{if(typeof M==="function"){M(U)}}D=false},onFailure:function(U){l("On Failure");delete U.returnValue;if(typeof M==="function"){M(U)}D=false}})};var J=function(R){M(R)};l("Cancel all previous message subscriptions");D=true;b(K,J)}else{var L={errorCode:O,errorText:N};M(L)}};a.prototype.unregisterSystemMonitor=function(H,I){b(H,I);l("After unregister, _gSystemMonitoringSetup are: "+JSON.stringify(q,null,3))};function b(H,I){l("cancelAllSubscription> setup are: "+JSON.stringify(q,null,3));for(var J in q){if(J){A(J)}}l("Stop Polling");G.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"systemMonitor/stopMonitor",parameters:{},onSuccess:function(K){l("On Success");if(K.returnValue===true){if(typeof H==="function"){H()}}else{if(typeof I==="function"){I(K)}}},onFailure:function(K){l("On Failure");delete K.returnValue;if(typeof I==="function"){I(K)}}})}a.prototype.getSystemMonitoringInfo=function(H,I){if(q){H({fan:q.fan.getEvent,signal:q.signal.getEvent,lamp:q.lamp.getEvent,screen:q.screen.getEvent,temperature:q.temperature.getEvent})}else{var J={errorCode:"ERROR",errorText:"Failed to get system monitoring setup"};I(J)}};a.prototype.setPowerSaveMode=function(H,I,L){var K;function J(N){if(N.powerSaveMode){for(var O in N.powerSaveMode){if(O){var P=N.powerSaveMode[O];if(O==="ses"||O==="do15MinOff"){if(typeof P!=="boolean"){K="Invalid value  : "+P;return false}}else{if(O==="automaticStandby"){if(!y(a.AutomaticStandbyMode,P)){K="Invalid automaticStandby value  : "+P;return false}}else{if(O==="dpmMode"){if(!y(a.DpmMode,P)){K="Invalid dpmMode value  : "+P;return false}}else{K="Unknown value  : "+O;return false}}}}}return true}else{K="powerSaveMode  does not exist.";return false}}if(J(L)){l(L.powerSaveMode);G.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"setPowerSaveMode",parameters:{mode:L.powerSaveMode},onSuccess:function(N){l("onSuccess");if(N.returnValue){H(N.mode)}else{l("FAILED: "+N.errorText);I({errorCode:N.errorCode,errorText:N.errorText})}},onFailure:function(N){l("onFailure");l("FAILED: "+N.errorText);I({errorCode:N.errorCode,errorText:N.errorText})}})}else{var M={errorCode:"BAD_PARAMETER",errorText:K};I(M)}};a.prototype.getPowerSaveMode=function(H,I){G.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"getPowerSaveMode",parameters:{},onSuccess:function(J){l("onSuccess");if(J.returnValue){H(J.mode)}else{l("FAILED: "+J.errorText);I({errorCode:J.errorCode,errorText:J.errorText})}},onFailure:function(J){l("onFailure");l("FAILED: "+J.errorText);I({errorCode:J.errorCode,errorText:J.errorText})}})};a.prototype.setUsagePermission=function(I,L,P){var K={};var M;function H(Q){if(Q.policy){for(var R in Q.policy){if(R){var S=Q.policy[R];if(R==="remoteKeyOperationMode"||R==="localKeyOperationMode"){if(!y(a.KeyOperationMode,S)){M="Invalid  KeyOperationMode value  : "+S;return false}}else{M="Unknown value  : "+R;return false}}}return true}else{M="policy  does not exist.";return false}}if(H(P)){if(P.policy.localKeyOperationMode){var O=P.policy.localKeyOperationMode;l("portraitMode: "+O);K[v.LOCALKEY_OPERATION_MODE]=O}if(P.policy.remoteKeyOperationMode){var N=P.policy.remoteKeyOperationMode;l("portraitMode: "+N);K[v.IR_OPERATION_MODE]=N}l("Set: "+JSON.stringify(K,null,3));i("hotelMode",K,I,L);l("setPolicy Done")}else{var J={errorCode:"BAD_PARAMETER",errorText:M};L(J)}};a.prototype.getUsagePermission=function(H,I){var K=function(L){l("settings: "+JSON.stringify(L,null,3));var M={};M.remoteKeyOperationMode=L[v.IR_OPERATION_MODE];M.localKeyOperationMode=L[v.LOCALKEY_OPERATION_MODE];l("cbObj: "+JSON.stringify(M,null,3));return M};var J=[v.IR_OPERATION_MODE,v.LOCALKEY_OPERATION_MODE];z("hotelMode",J,K,H,I)};a.prototype.getUsageData=function(H,I){var J=false;var K=false;var M={uptime:false,totalUsed:false};function L(){l("accessResult");if(J===true&&K===true){l("CB Object: "+JSON.stringify(M,null,3));if(M.uptime===false||M.totalUsed===false){I({errorCode:"CORDOVA_FAIL",errorText:"Failed to get usage data"});return}else{l("SUCCESS");H(M);return}}else{l("Not Yet")}}G.Request("luna://com.webos.service.tv.signage/",{method:"getUTT",parameters:{},onSuccess:function(N){l("On getUTT Success");J=true;if(N.returnValue===true){l("UTT is :"+N.UTT);M.totalUsed=N.UTT}L()},onFailure:function(N){l("On getUTT Failure :"+JSON.stringify(N,null,3));J=true;L()}});G.Request("luna://com.webos.service.tv.signage/",{method:"dsmp/getElapsedTime",parameters:{},onSuccess:function(N){l("On getElapsedTime Success");K=true;l("result: "+JSON.stringify(N,null,3));if(N.returnValue===true){var O=N.elapsedTime;M.uptime=O;l("Elapsed!!: "+O)}L()},onFailure:function(N){l("On getSystemSettings Failure "+JSON.stringify(N,null,3));K=true;L()}})};a.prototype.captureScreen=function(H,I,J){var K={save:(J===undefined||J===null||J.save===undefined?false:J.save)};if(J!==undefined&&J!==null&&J.thumbnail!==undefined&&J.thumbnail===true){K.width=128;K.height=72}else{if(J.imgResolution===a.ImgResolution.FHD){K.width=1920;K.height=1080}else{K.width=1280;K.height=720}}G.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"captureScreen",parameters:K,onSuccess:function(L){l("On Success");if(L.returnValue===true){H({data:L.data,size:L.size,encoding:L.encoding})}else{I({errorCode:L.errorCode,errorText:L.errorText})}},onFailure:function(L){l("On Failure");I({errorCode:L.errorCode,errorText:L.errorText})}})};a.prototype.setIntelligentAuto=function(I,J,K){l("setIntelligentAuto: "+K.enabled);if(K.enabled===null&&typeof J==="function"){var H={};r(H,"SSIA","Signage.setIntelligentAuto returns failure. command was not defined.");J(H);l("Signage.setIntelligentAuto invalid ");return}G.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"set",parameters:{category:"commercial",settings:{intelligentAuto:(K.enabled===true)?"on":"off"}},onSuccess:function(L){l("setIntelligentAuto: On Success");if(L.returnValue===true){if(typeof I==="function"){I()}}},onFailure:function(L){l("setIntelligentAuto: On Failure");delete L.returnValue;if(typeof J==="function"){r(L,"SSIA","Signage.setIntelligentAuto returns failure.");J(L)}}});l("Signage.setIntelligentAuto Done")};a.prototype.getIntelligentAuto=function(H,I){l("getIntelligentAuto: ");G.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"get",parameters:{category:"commercial",keys:["intelligentAuto"]},onSuccess:function(J){l("getIntelligentAuto: On Success");if(J.returnValue===true){var K={};K.enabled=J.settings.intelligentAuto;if(typeof H==="function"){H(K)}}},onFailure:function(J){l("getIntelligentAuto: On Failure");delete J.returnValue;if(typeof I==="function"){r(J,"SGIA","Signage.getIntelligentAuto returns failure.");I(J)}}});l("Signage.getIntelligentAuto Done")};a.prototype.setStudioMode=function(I,J,K){l("setStudioMode: "+K.enabled);if(K.enabled===null&&typeof J==="function"){var H={};r(H,"SSSM","Signage.setStudioMode returns failure. command was not defined.");J(H);l("Signage.setStudioMode invalid ");return}G.Request("luna://com.webos.service.commercial.signage.storageservice/",{method:"version",onSuccess:function(M){if(M.returnValue===true){var L=M.version;if(L[0]==="1"&&L[2]==="5"){var N={};r(N,"ERROR","This function is not supported");J(N);return}else{G.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"set",parameters:{category:"commercial",settings:{studioMode:(K.enabled===true)?"on":"off"}},onSuccess:function(O){l("setStudioMode: On Success");if(O.returnValue===true){if(typeof I==="function"){I()}}},onFailure:function(O){l("setStudioMode: On Failure");delete O.returnValue;if(typeof J==="function"){r(O,"SSSM","Signage.setStudioMode returns failure.");J(O)}}})}}},onFailure:function(L){delete L.returnValue;if(typeof J==="function"){r(L,"SSSM","Signage.setStudioMode returns failure.");J(L)}}});l("Signage.setStudioMode Done")};a.prototype.getStudioMode=function(H,I){l("getStudioMode: ");G.Request("luna://com.webos.service.commercial.signage.storageservice/",{method:"version",onSuccess:function(K){if(K.returnValue===true){var J=K.version;if(J[0]==="1"&&J[2]==="5"){var L={};r(L,"ERROR","This function is not supported");I(L);return}else{G.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"get",parameters:{category:"commercial",keys:["studioMode"]},onSuccess:function(M){l("getStudioMode: On Success");if(M.returnValue===true){var N={};N.enabled=(M.settings.studioMode==="on")?true:false;if(typeof H==="function"){H(N)}}},onFailure:function(M){l("getStudioMode: On Failure");delete M.returnValue;if(typeof I==="function"){r(M,"SGSM","Signage.getStudioMode returns failure.");I(M)}}})}}},onFailure:function(J){delete J.returnValue;if(typeof I==="function"){r(J,"SGSM","Signage.getStudioMode returns failure.");I(J)}}});l("Signage.getStudioMode Done")};a.prototype.setLanDaisyChain=function(H,I,J){G.Request("luna://com.webos.service.config/",{method:"getConfigs",parameters:{configNames:["commercial.hw.lanDaisyChain"]},onSuccess:function(K){if(K.returnValue===true){if(K.configs["commercial.hw.lanDaisyChain"]===false){r(K,"SSLD","Signage.setLanDaisyChain returns failure. unsupported feature. ");I(K);l("Signage.setLanDaisyChain invalid ");return}else{if(J.enabled===null&&typeof I==="function"){var K={};r(K,"SSLD","Signage.setLanDaisyChain returns failure. command was not defined.");I(K);l("Signage.setLanDaisyChain invalid ");return}l("setLanDaisyChain: "+J.enabled);G.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"set",parameters:{category:"commercial",settings:{lanDaisyChain:(J.enabled===true)?"on":"off"}},onSuccess:function(L){l("setLanDaisyChain: On Success");if(L.returnValue===true){if(typeof H==="function"){H()}}},onFailure:function(L){l("setLanDaisyChain: On Failure");delete L.returnValue;if(typeof I==="function"){r(L,"SSIA","Signage.setLanDaisyChain returns failure.");I(L)}}});l("Signage.setLanDaisyChain Done")}}},onFailure:function(K){delete K.returnValue;if(typeof I==="function"){I(K)}}})};a.prototype.getLanDaisyChain=function(H,I){G.Request("luna://com.webos.service.config/",{method:"getConfigs",parameters:{configNames:["commercial.hw.lanDaisyChain"]},onSuccess:function(J){if(J.returnValue===true){if(J.configs["commercial.hw.lanDaisyChain"]===false){r(J,"SSLD","Signage.getLanDaisyChain returns failure. unsupported feature. ");I(J);l("Signage.getLanDaisyChain invalid ");return}else{l("getLanDaisyChain: ");G.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"get",parameters:{category:"commercial",keys:["lanDaisyChain"]},onSuccess:function(K){l("getLanDaisyChain: On Success");if(K.returnValue===true){var L={};L.enabled=(K.settings.lanDaisyChain==="on")?true:false;if(typeof H==="function"){H(L)}}},onFailure:function(K){l("getLanDaisyChain: On Failure");delete K.returnValue;if(typeof I==="function"){r(K,"SSLD","Signage.getLanDaisyChain returns failure.");I(K)}}});l("Signage.getLanDaisyChain Done")}}},onFailure:function(J){delete J.returnValue;if(typeof I==="function"){I(J)}}})};a.prototype.registerRS232CEventListener=function(H,I,J){if(typeof J.eventListener!=="function"){var K={errorCode:"BAD_PARAMETER",errorText:"No event listener was given or event listener is not a function"};I(K);return false}h(H,I,J.eventListener)};a.prototype.unregisterRS232CEventListener=function(H,I){if(j("RS232C")===false){if(typeof I==="function"){I({errorCode:"BAD_PARAMETER",errorText:"Failed to remove event listener"})}return}else{G.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"systemMonitor/stopMonitorRS232C",parameters:{},onSuccess:function(J){l("On Success");if(J.returnValue===true){if(typeof H==="function"){H()}}else{if(typeof I==="function"){I(J)}}},onFailure:function(J){l("On Failure");delete J.returnValue;if(typeof I==="function"){I(J)}}})}};a.prototype.addEventListener=s;a.prototype.removeEventListener=A;a.prototype.getNoSignalImageMode=function(H,I){l("getnoSignalImage: ");G.Request("luna://com.webos.service.commercial.signage.storageservice/signage/",{method:"getNoSignalImageMode",onSuccess:function(J){l("getNoSignalImage: On Success");if(J.returnValue===true){var K={};K.enabled=(J.noSignalImage==="on")?"on":"off";if(typeof H==="function"){H(K)}}},onFailure:function(J){l("getNoSignalImage: On Failure");delete J.returnValue;if(typeof I==="function"){r(J,"SGSI","Signage.getNoSignalImage returns failure.");I(J)}}});l("Signage.getNoSignalImageMode Done")};a.prototype.setNoSignalImageMode=function(H,I,J){l("setNoSignalImageMode: ");G.Request("luna://com.webos.service.commercial.signage.storageservice/signage/",{method:"setNoSignalImageMode",parameters:{noSignalImageMode:J.noSignalImageMode},onSuccess:function(K){l("setNoSignalImageMode: On Success");if(K.returnValue===true){if(typeof H==="function"){H()}}},onFailure:function(K){l("setNoSignalImageMode: On Failure");delete K.returnValue;if(typeof I==="function"){r(K,"SSSI","Signage.setNoSignalImageMode returns failure.");I(K)}}});l("Signage.setNoSignalImageMode Done")};a.prototype.updateNoSignalImageList=function(H,I,J){l("updateNoSingalImageList");G.Request("luna://com.webos.service.commercial.signage.storageservice/signage/",{method:"updateNoSignalImageList",parameters:J,onSuccess:function(K){l("updateNoSignalImageList: On Success");if(K.returnValue===true){if(typeof H==="function"){H()}}},onFailure:function(K){l("updateNoSignalImageList: On Failure");delete K.returnValue;if(typeof I==="function"){r(K,"SUNSIL","Signage.updateNoSignalImageList returns failure.");I(K)}}});l("Signage.updateNoSignalImageList Done")};a.prototype.resetNoSignalImage=function(H,I){l("resetNoSignalImage: ");G.Request("luna://com.webos.service.commercial.signage.storageservice/signage/",{method:"resetNoSignalImage",onSuccess:function(J){l("resetNoSignalImage: On Success");if(J.returnValue===true){if(typeof H==="function"){H()}}},onFailure:function(J){l("resetNoSignalImage: On Failure");delete J.returnValue;if(typeof I==="function"){r(J,"SRNSI","Signage.resetNoSignalImage returns failure.");I(J)}}});l("Signage.resetNoSignalImage Done")};a.prototype.addKeyItem=function(H,I,J){G.Request("luna://com.webos.service.commercial.signage.storageservice/signage/",{method:"addKeyItem",parameters:J,onSuccess:function(K){l("addKeyItem: On Success");if(K.returnValue===true){if(typeof H==="function"){H()}}},onFailure:function(K){l("addKeyItem: On Failure");delete K.returnValue;if(typeof I==="function"){r(K,"SAKI","Signage.addKeyItem returns failure.");I(K)}}});l("Signage.addKeyItem Done")};a.prototype.clearKeyTable=function(H,I){G.Request("luna://com.webos.service.commercial.signage.storageservice/signage/",{method:"clearKeyTable",onSuccess:function(J){l("clearKeyTable: On Success");if(J.returnValue===true){if(typeof H==="function"){H()}}},onFailure:function(J){l("clearKeyTable: On Failure");delete J.returnValue;if(typeof I==="function"){r(J,"SCKT","Signage.clearKeyTable returns failure.");I(J)}}});l("Signage.clearKeyTable Done")};a.prototype.removeKeyItem=function(H,I,J){G.Request("luna://com.webos.service.commercial.signage.storageservice/signage/",{method:"removeKeyItem",parameters:J,onSuccess:function(K){l("removeKeyItem: On Success");if(K.returnValue===true){if(typeof H==="function"){H()}}},onFailure:function(K){l("removeKeyItem: On Failure");delete K.returnValue;if(typeof I==="function"){r(K,"SAKI","Signage.removeKeyItem returns failure.");I(K)}}});l("Signage.removeKeyItem Done")};a.prototype.sendKey=function(H,I,J){G.Request("luna://com.webos.service.commercial.signage.storageservice/signage/",{method:"sendKey",parameters:J,onSuccess:function(K){l("sendKey: On Success");if(K.returnValue===true){if(typeof H==="function"){H()}}},onFailure:function(K){l("sendKey: On Failure");delete K.returnValue;if(typeof I==="function"){r(K,"SSKY","Signage.sendKey returns failure.");I(K)}}});l("Signage.sendKey Done")};c.exports=a});Signage=cordova.require("cordova/plugin/signage");